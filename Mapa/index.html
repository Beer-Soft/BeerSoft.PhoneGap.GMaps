<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="onsenui/css/onsenui.min.css">
    <link rel="stylesheet" href="onsenui/css/onsen-css-components.min.css">
    <script src="onsenui/js/onsenui.min.js"></script>
    <script src="onsenui/js/jquery.min.js"></script>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript">
        document.addEventListener("deviceready", function () {
          
        }, false);

        ons.ready(function () {
            var lt, ln;
            var div = document.getElementById("map_canvas");
            // If your app runs this program on browser,
            // you need to set `API_KEY_FOR_BROWSER_RELEASE` and `API_KEY_FOR_BROWSER_DEBUG`
            // before `plugin.google.maps.Map.getMap()`
            //
            //   API_KEY_FOR_BROWSER_RELEASE for `https:` protocol
            //   API_KEY_FOR_BROWSER_DEBUG for `http:` protocol
            //
            // If your app does not use browser,
            // you can comment out this code.
            plugin.google.maps.environment.setEnv({
                'API_KEY_FOR_BROWSER_RELEASE': '(YOUR_API_KEY_IS_HERE)',
                'API_KEY_FOR_BROWSER_DEBUG': ''
            });
            // Create a Google Maps native view under the map_canvas div.
            var map = plugin.google.maps.Map.getMap(div);
            // If you click the button, do something...
            var button = document.getElementById("button");
            button.addEventListener("click", function () {

                if (navigator.geolocation) {
                    var opciones = {
                        timeout: 3000,
                        enableHighAccuracy: true
                    };
                    navigator.geolocation.getCurrentPosition(function (posicion) {

                        lt = posicion.coords.latitude;
                        ln = posicion.coords.longitude;

                        ons.notification.alert("Latitud:" + lt + "\n" + "Longitud: " + ln);
                        //// Move to the position with animation
                        //map.animateCamera({
                        //    target: { lat: lt, lng: ln },
                        //    zoom: 17,
                        //    tilt: 60,
                        //    bearing: 140,
                        //    duration: 5000
                        //});
                        // Add a maker
                        var marker = map.addMarker({
                            position: { lat: lt, lng: ln },
                            title: "Welecome to \n" +
                                "Cordova GoogleMaps plugin for iOS,Android and Browser!",
                            snippet: "This plugin is awesome!",
                            animation: plugin.google.maps.Animation.BOUNCE
                        });
                        // Show the info window
                        marker.showInfoWindow();

                    }, function (e) {
                       
                        var msg = "Error en geolocalización: #" + e.code + "\n" + e.message;
                        console.log(msg);
                        ons.notification.alert(msg);
                        //alert(msg);
                    }
                        , opciones);
                } else {
                    ons.notification.alert("Tu navegador no soporta la geolocalización");
                }
            });
        });

            
    </script>
    <style type="text/css">
        html, body {
            height: 100%;
        }

        #map_canvas { /* Must bigger size than 100x100 pixels */
            width: 100%;
            height: 100%;
            position:absolute;
        }

        button {
            padding: .5em;
            margin: .5em;
        }
    </style>
</head>
<body>
    <div id="map_canvas">
        <button id="button">Localizarme</button>
    </div>
    <!--<ons-page id="helloworld-page">
        <ons-toolbar>
            <div class="center">Mapa</div>
            <div class="right">
                <ons-toolbar-button>
                    <ons-icon icon="ion-navicon, material:md-menu"></ons-icon>
                </ons-toolbar-button>
            </div>
        </ons-toolbar>
        <div class="content">
            <div id="map_canvas">
                <button id="button">Click me!</button>
            </div>
        </div>
    </ons-page>-->

</body>
</html>